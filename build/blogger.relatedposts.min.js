/** Copyright (c) 2015 akinari tsugo */
(function(){function h(b,c,a){var f;h=f=window.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:window.attachEvent?function(a,b,c){a.attachEvent("on"+b,c)}:function(a,b,c){a["on"+b]=c};f(b,c,a)};function k(){p(this,this,RELATEDPOSTS_SETTINGS,{BlogUrl:window.location.hostname,MaxResults:5,TitleVisible:!0,ThumbnailVisible:!0,SnippetVisible:!0,a:120,NoThumbnailImageUrl:"//4.bp.blogspot.com/-9mCCaXTpn9I/VN4hDMsFXlI/AAAAAAAAC6U/i84N2Ng37Ik/s1600/noimage.png",NoRelatedPostsMessage:"No Related Posts...",LabelElementId:"blogger.relatedposts.label",OutputElementId:"blogger.relatedposts.output"})}
function p(b,c,a,f){var d;a=a||{};for(d in f)"object"!==typeof f[d]||f[d]instanceof Array?c[d]=void 0!==a[d]?a[d]:f[d]:(c[d]=c[d]||{},p(b,c[d],a[d],f[d]))};function q(){var b;s=new k;b=document.getElementById(s.LabelElementId).innerText.split(",");t=b.length;var c,a;if(0===b.length)u();else for(c=b.length;c--;)a="",a+="//"+s.BlogUrl+"/",a+="feeds/posts/default/-/",a+=encodeURIComponent((b[c]||"").replace(/^\s*/,"").replace(/\s*$/,"")),a+="?",a+="alt=json&",a+="callback=",a+="garafu.blogger.relatedposts.Main.onloading",script=document.createElement("script"),script.src=a,script.type="text/javascript",document.body.appendChild(script)}
var s=null,v=[],t=0,w=0,x=null;function y(){var b=x;b||(x=b=new q)}function u(){output=document.getElementById(s.OutputElementId);output.appendChild(document.createTextNode(s.NoRelatedPostsMessage))}function z(b){var c=s.a,a="";b=b.replace(/\x3c!--[\s\S]*--\x3e/g,"");b=b.replace(/<style[\s\S="']*>[\s\S]*<\/style>/g,"");b=b.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"");b.length<c+4?a=b:(a+=b.substring(0,c-4),a+=" ...");return a}h(window,"load",function(){y()});
function A(b){y();entries=b.feed.entry||[];v=v.concat(entries);w+=1;if(w>=t){b=v;var c,a,f,d,g,l,F=document.location.href;d=s.MaxResults;f=b.length<d?b.length:d;if(0===f)u();else{d=document.createElement("ul");for(a=0;a<f;a++){c=Math.floor(b.length*Math.random());if(F!==b[c].link){g=b[c];l=s;var r=void 0,e=void 0,n=e=void 0,m=e=void 0,B=void 0,r=document.createElement("div");r.className="item-content";n=document.createElement("a");n.href=/https?:(\/\/[\w\-\.~#\$&\+\/:=\?%]+)/.exec(g.link[g.link.length-
1].href)[1];r.appendChild(n);l.ThumbnailVisible&&(B=(m=(g.content.$t||"").match(/<img.*?src=['"](.*?)["'].*?>/))&&m[1]||l.NoThumbnailImageUrl)&&(e=document.createElement("div"),e.className="item-thumbnail",m=document.createElement("img"),m.style.width="72px",m.style.height="72px",m.src=B,e.appendChild(m),n.appendChild(e));l.TitleVisible&&(e=document.createElement("div"),e.className="item-title",e.appendChild(document.createTextNode(g.title.$t)),n.appendChild(e));l.SnippetVisible&&(e=document.createElement("div"),
e.className="item-snippet",e.appendChild(document.createTextNode(z(g.content.$t||""))),n.appendChild(e));l=r;g=document.createElement("li");g.appendChild(l);d.appendChild(g)}else a-=1;b.splice(c,1)}b=document.getElementById(s.OutputElementId);b.appendChild(d)}}}var C=["garafu","blogger","relatedposts","Main","onloading"],D=this;C[0]in D||!D.execScript||D.execScript("var "+C[0]);for(var E;C.length&&(E=C.shift());)C.length||void 0===A?D=D[E]?D[E]:D[E]={}:D[E]=A;})();
