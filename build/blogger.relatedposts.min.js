/** Copyright (c) 2015 akinari tsugo */
(function(){function h(b,a,c){var e;h=e=window.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:window.attachEvent?function(a,b,c){a.attachEvent("on"+b,c)}:function(a,b,c){a["on"+b]=c};e(b,a,c)};function k(){p(this,this,RELATEDPOSTS_SETTINGS,{BlogUrl:window.location.hostname,MaxResults:5,TitleVisible:!0,ThumbnailVisible:!0,SnippetVisible:!0,SnippetMaxLength:120,NoThumbnailImageUrl:"//4.bp.blogspot.com/-9mCCaXTpn9I/VN4hDMsFXlI/AAAAAAAAC6U/i84N2Ng37Ik/s1600/noimage.png",LoadingMessage:"Loading ...",NoRelatedPostsMessage:"No Related Posts.",LabelElementId:"blogger.relatedposts.label",OutputElementId:"blogger.relatedposts.output"})}
function p(b,a,c,e){var d;c=c||{};for(d in e)"object"!==typeof e[d]||e[d]instanceof Array?a[d]=void 0!==c[d]?c[d]:e[d]:(a[d]=a[d]||{},p(b,a[d],c[d],e[d]))};function q(){var b,a,c;b=t=new k;a=document.getElementById(b.LabelElementId);c=a.innerText.split(",");u=c.length;a=document.getElementById(b.OutputElementId);a.innerHTML=b.LoadingMessage;if(0===c.length)this.a();else for(b=c.length;b--;)a="",a+="//"+t.BlogUrl+"/",a+="feeds/posts/default/-/",a+=encodeURIComponent((c[b]||"").replace(/^\s*/,"").replace(/\s*$/,"")),a+="?",a+="alt=json&",a+="callback=",a+="garafu.blogger.relatedposts.Main.onloading",script=document.createElement("script"),script.src=a,
script.type="text/javascript",document.body.appendChild(script)}var t=null,v=[],u=0,x=0,y=null;function z(){var b=y;b||(y=b=new q)}function A(b){var a=t.SnippetMaxLength,c="";b=b.replace(/\x3c!--[\s\S]*--\x3e/g,"");b=b.replace(/<style[\s\S="']*>[\s\S]*<\/style>/g,"");b=b.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"");b.length<a+4?c=b:(c+=b.substring(0,a-4),c+=" ...");return c}h(window,"load",function(){z()});
function B(b){z();entries=b.feed.entry||[];v=v.concat(entries);x+=1;if(x>=u){var a=v;b=document.getElementById(t.OutputElementId);for(var c;c=b.firstChild;)b.removeChild(c);if(0!==a.length){var e,d,w,s,g,l;c=document.location.href;e=t.MaxResults;w=a.length<e?a.length:e;s=document.createElement("ul");for(d=0;d<w;d++){e=Math.floor(a.length*Math.random());if(c!==a[e].link){g=a[e];l=t;var r=void 0,f=void 0,n=f=void 0,m=f=void 0,C=void 0,r=document.createElement("div");r.className="item-content";n=document.createElement("a");
n.href=/https?:(\/\/[\w\-\.~#\$&\+\/:=\?%]+)/.exec(g.link[g.link.length-1].href)[1];r.appendChild(n);l.ThumbnailVisible&&(C=(m=(g.content.$t||"").match(/<img.*?src=['"](.*?)["'].*?>/))&&m[1]||l.NoThumbnailImageUrl)&&(f=document.createElement("div"),f.className="item-thumbnail",m=document.createElement("img"),m.style.width="72px",m.style.height="72px",m.src=C,f.appendChild(m),n.appendChild(f));l.TitleVisible&&(f=document.createElement("div"),f.className="item-title",f.appendChild(document.createTextNode(g.title.$t)),
n.appendChild(f));l.SnippetVisible&&(f=document.createElement("div"),f.className="item-snippet",f.appendChild(document.createTextNode(A(g.content.$t||""))),n.appendChild(f));l=r;g=document.createElement("li");g.appendChild(l);s.appendChild(g)}else d-=1;a.splice(e,1)}a=s}else a=document.createTextNode(t.NoRelatedPostsMessage);b.appendChild(a)}}var D=["garafu","blogger","relatedposts","Main","onloading"],E=this;D[0]in E||!E.execScript||E.execScript("var "+D[0]);
for(var F;D.length&&(F=D.shift());)D.length||void 0===B?E=E[F]?E[F]:E[F]={}:E[F]=B;})();
