/** Copyright (c) 2015 akinari tsugo */
(function(){var d=null,p=[],q=0,r=0;function s(){output=document.getElementById(d.OutputElementId);output.appendChild(document.createTextNode(d.NoRelatedPostsMessage))}
function u(a){if(200===a.status.code&&(a=a.feed.entries||[],p=p.concat(a),r+=1,!(r<q))){a=p;var g,b,l,m,e,h,v=document.location.href;m=d.MaxResults;l=a.length<m?a.length:m;if(0===l)s();else{m=document.createElement("ul");for(b=0;b<l;b++){g=Math.floor(a.length*Math.random());if(v!==a[g].link){e=a[g];h=d;var n=void 0,f=void 0,c=f=void 0,k=c=void 0,t=void 0,n=document.createElement("div");n.className="item-content";h.ThumbnailVisible&&(t=(k=(e.content||"").match(/<img.*?src=['"](.*?)["'].*?>/))&&k[1]||
h.NoThumbnailImageUrl)&&(f=document.createElement("div"),f.className="item-thumbnail",c=document.createElement("a"),c.href=e.link,k=document.createElement("img"),k.style.width="72px",k.style.height="72px",k.src=t,c.appendChild(k),f.appendChild(c),n.appendChild(f));h.TitleVisible&&(f=document.createElement("div"),f.className="item-title",c=document.createElement("a"),c.href=e.link,c.appendChild(document.createTextNode(e.title)),f.appendChild(c),n.appendChild(f));h.SnippetVisible&&(c=document.createElement("div"),
c.className="item-snippet",c.innerHTML=e.contentSnippet,n.appendChild(c));h=n;e=document.createElement("li");e.appendChild(h);m.appendChild(e)}else b-=1;a.splice(g,1)}a=document.getElementById(d.OutputElementId);a.appendChild(m)}}}google.load("feeds","1");
google.setOnLoadCallback(function(){var a;a=RELATEDPOSTS_SETTINGS||{};d={BlogUrl:a.BlogUrl||window.location.hostname,MaxResults:a.MaxResults||5,TitleVisible:"boolean"===typeof a.TitleVisible?a.TitleVisible:!0,ThumbnailVisible:"boolean"===typeof a.ThumbnailVisible?a.ThumbnailVisible:!0,SnippetVisible:"boolean"===typeof a.SnippetVisible?a.SnippetVisible:!0,NoThumbnailImageUrl:"undefined"!==typeof a.NoThumbnailImageUrl?a.NoThumbnailImageUrl:"//4.bp.blogspot.com/-9mCCaXTpn9I/VN4hDMsFXlI/AAAAAAAAC6U/i84N2Ng37Ik/s1600/noimage.png",
NoRelatedPostsMessage:"undefined"!==typeof a.NoRelatedPostsMessage?a.NoRelatedPostsMessage:"No Related Posts...",LabelElementId:a.LabelElementId||"blogger.relatedposts.label",OutputElementId:a.OutputElementId||"blogger.relatedposts.output"};a=document.getElementById(d.LabelElementId).innerText.split(",");q=a.length;var g,b,l;if(0===a.length)s();else for(l=Math.ceil(1.2*d.MaxResults),g=a.length;g--;)b=window.location.protocol,b+="//"+d.BlogUrl+"/",b+="feeds/posts/default/-/",b+=encodeURIComponent((a[g]||
"").replace(/^\s*/,"").replace(/\s*$/,"")),b=new google.feeds.Feed(b),b.setResultFormat(google.feeds.Feed.JSON_FORMAT),b.setNumEntries(l),b.load(u)});})();
